<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Website Title -->
    <title>Open Path Planner</title>

    <!-- Leaflet CSS map functionality-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Leaflet script for map functionality-->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- Geocoder CSS & script, allows text box search function to work -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <style>
        /* Map dimesions */
        #map {
            height: 700px;
            width: 100%;
        }

        /* Position and style of search box */
        #searchBox {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            padding: 5px;
            font-size: 16px;
            width: 200px;
            border: 2px solid #ccc;
            border-radius: 6px;
        }
    </style>

</head>


<body>

<!-- Header text -->
<h1>Open Path Planner</h1>

<!-- Textbox ID and placeholder text -->
<input type="text" id="searchBox" placeholder="Enter your position" />

<!-- Map ID to manipulate later-->
<div id="map"></div>


<script>

    // Initialize the map at coordinates of UF with 11 zoom
    var map = L.map('map').setView([29.6465,-82.3533], 11);

    // Add OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);


    // Sample route of 4 coordinates
    var route = [
        [51.505, -0.09],
        [51.515, -0.1],
        [51.525, -0.11],
        [51.535, -0.12]
    ];

    /*
    var routePolyline = L.polyline(route, {
        color: 'blue',       // Set the color of the route
        weight: 5,           // Set the width of the route
        opacity: 0.7        // Set the opacity of the route
    }).addTo(map);

    // Fit the map to the bounds of the polyline
    map.fitBounds(routePolyline.getBounds());
    */

    // Initialize the geocoder
    var geocoder = L.Control.Geocoder.nominatim();

    // Initialize markers for the current location and destination
    var currentMarker, destinationMarker;

    // Add the geocoder control to the map
    L.Control.geocoder({
        collapsed: false,
        placeholder: 'Search for an address...',
        geocoder: geocoder
    }).addTo(map);

    // Listen for geocoding results and handle  event
    map.on('geocoded', function (event) {
        var result = event.geocode; // The selected address result

        //console.log('Geocoded result:', result);

        // Center map on the geocoded address and zoom in
        map.setView(result.center, 13);

        marker.setLatLng(result.center);
        marker.bindPopup("<b>" + result.name + "</b>").openPopup();
    });

</script>

</body>
</html>
